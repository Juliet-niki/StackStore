<div class="bg-gray-200 min-h-screen">
  <app-navigation-bar></app-navigation-bar>
  <ng-template #emptyCart>
    <div
      class="flex flex-col items-center justify-center gap-5 min-h-[calc(100vh-5rem)]"
    >
      <p class="font-medium text-center text-lg text-gray-800">
        Your cart
        <i class="fas fa-cart-plus md:text-lg sm-text[1rem] text-[0.8rem]"></i>
        is empty
      </p>
      <button
        routerLink="/"
        class="bg-blue-700 hover:bg-blue-800 cursor-pointer text-white border-0 py-2 px-4 rounded"
      >
        Start Shopping
      </button>
    </div>
  </ng-template>

  <div
    *ngIf="cartItems.length > 0; else emptyCart"
    class="pb-30 font-sans flex flex-col justify-center items-center lg:pt-28 md:pt-24 pt-20 bg-red"
  >
    <button
      (click)="goBack()"
      class="text-black text-[1rem] font-medium py-1 mr-auto ml-[11.2vw] mb-2 w-20 bg-gray-200 hover:text-gray-700 cursor-pointer rounded-lg"
    >
      <i class="fas fa-angle-left"></i>
      Back
    </button>
    <div class="gap-8 flex flex-col md:flex-row">
      <main
        class="lg:w-[50vw] md:w-[55vw] w-[80vw] px-4 shadow-lg bg-white rounded-xl"
      >
        <div
          *ngFor="let item of cartItems; let i = index; let last = last"
          [ngClass]="{
            'border-b-1 border-gray-400 ': cartItems.length > 1 && !last
          }"
          class="flex gap-3"
        >
          <div class="bg-white">
            <img
              [src]="item.image"
              [alt]="item.name"
              class="object-contain lg:w-40 md:w-35 sm:w-20 w-15 lg:h-35 md:h-35 sm:h-25 h-20"
            />
          </div>

          <div class="text-gray-700 flex py-3 justify-between w-full">
            <span class="">
              <h3
                class="font-bold md:text-[1.2rem] text-[0.9rem] text-gray-700"
              >
                {{ item.name }}
              </h3>
              <p *ngIf="item.slug" class="text-[0.9rem]">
                Quantity: {{ getQuantity(item.slug) }}
              </p>
            </span>

            <div class="flex flex-col items-center">
              <p
                class="font-medium text-gray-800 md:text-[1.1rem] text-[0.9rem] pt-2"
              >
                ₦{{
                  (item.price ?? 0) * getQuantity(item.slug ?? "")
                    | number : "1.0-0"
                }}
              </p>
              <span class="mt-auto">
                <app-cart-button
                  [productItem]="item"
                  (quantityChanged)="refreshCartItems()"
                ></app-cart-button>
              </span>
            </div>
          </div>
        </div>
      </main>
      <div
        class="h-fit lg:w-[25vw] md:w-[30vw] w-[80vw] rounded-xl shadow-lg bg-white flex flex-col py-4 px-3"
      >
        <h3
          class="font-medium text-center text-gray-700 text-[1rem] border-b-1 border-gray-400"
        >
          CART SUMMARY
        </h3>
        <span
          class="flex justify-between item-end pt-3 mb-3 border-b-1 border-gray-400"
        >
          <p class="text-gray-600 text-[0.9rem]">Total Price</p>
          <p class="text-gray-700 font-medium text-[1.2rem]">
            ₦{{ getTotalPrice() }}
          </p>
        </span>

        <button mat-flat-button color="accent" class="checkout-btn">
          Confirm Order (₦{{ getTotalPrice() }})
        </button>
      </div>
    </div>
  </div>
</div>
